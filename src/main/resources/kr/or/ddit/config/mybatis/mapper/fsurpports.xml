<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="fsurpports">
	
	<!-- 일지 갯수 조회. -->
	<select id="selectAllFsurpportListCnt" resultType="int">
		SELECT COUNT(*)
		FROM farmdiary
	</select>
	
	<!-- 일지 조회. -->
	<select id="selectAllFsurpportList" resultType="farmdiaryVo">
		SELECT 
		    f.fdiary_no, f.writer, f.content,
		    f.reg_dt, f.weather, f.low_temp,
		    f.high_temp, f.rainfall, f.humid,
		    f.yield, f.area, f.file_no,
		    f.use, f.btype_code, f.wstep_code,
		    f.item_code 
		FROM farmdiary f
		JOIN codes c
		ON f.btype_code = c.code_No;
	</select>
	
	<!-- 페이징 처리하여 영농일지 조회 -->
	<select id="selectPagingFarmdiary" resultType="farmdiaryVo" 
									parameterType="pageVo">

		select *
			from
			(select rownum rn, a.*
			from
			(SELECT
			f.fdiary_no, f.writer, f.content,
			f.reg_dt, f.weather, f.low_temp,
			f.high_temp, f.rainfall, f.humid,
			f.yield, f.area, f.file_no,
			f.use, f.btype_code, f.wstep_code,
			f.item_code
			FROM farmdiary f
			JOIN codes c
			ON f.btype_code = c.code_No) a
		where rownum &lt;= #{page}*#{pageSize})
		WHERE rn BETWEEN (#{page}-1)*#{pageSize} + 1 AND #{page}*#{pageSize}
  	
  	</select>
	
	
	<!-- 날짜 기준으로 검색 -->
<!-- 	<select id="searchAllFsurpportList" parameterType="farmdiaryVo" resultType="farmdiaryVo"> -->
<!-- 		select * -->
<!-- 		from farmdiary -->
<!-- 		where reg_dt &gt;= TO_DATE(#{startDate }, 'YYYY-MM-DD') -->
<!-- 		and reg_dt &lt;= TO_DATE(#{endDate }, 'YYYY-MM-DD') -->
<!-- 		or item_code = #{item_code } -->
<!-- 		or wstep_code = #{wstep_code } -->
<!-- 	</select> -->
	

	

	
	

</mapper>

